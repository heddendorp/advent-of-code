<main class="min-h-full p-4 dark:text-white">
  <h1 class="mb-4 font-mono text-2xl font-black">
    --- Day 5: Hydrothermal Venture ---
  </h1>
  <p class="max-w-xl">The task is to map lines and find intersection points.</p>
  <div class="lg:row flex lg:h-full lg:max-w-6xl">
    @if (currentStep | async; as step) {
      <div>
        <div>
          <h3 class="mt-6 mb-2 font-bold">Load lines</h3>
          <p>We draw all lines that we got from the input.</p>
          <div class="lg:row flex space-x-4">
            <button (click)="loadExample()" class="button" type="button">
              Load example
            </button>
            <button (click)="loadRiddle()" class="button" type="button">
              Load full input
            </button>
          </div>
          @if (step >= 2) {
            <div>
              <h3 class="mt-6 mb-2 font-bold">Remove vertical lines</h3>
              <p>
                Only look at non diagonal lines for now. You can skip this part
                to answer the second part of the riddle
              </p>
              <div class="lg:row flex space-x-4">
                <button
                  (click)="removeDiagonals()"
                  class="button"
                  type="button"
                >
                  Remove diagonal lines
                </button>
              </div>
            </div>
          }
          @if (step >= 2) {
            <div>
              <h3 class="mt-6 mb-2 font-bold">Check overlap</h3>
              <p>
                Check at each point if there are two or more lines passing it
                and count the points that have more lines
              </p>
              <div class="lg:row flex space-x-4">
                <button (click)="checkOverlap()" class="button" type="button">
                  Check grid
                </button>
              </div>
            </div>
          }
          @if (step >= 4) {
            <div>
              <h3 class="mt-6 mb-2 font-bold">Result</h3>
              <p>
                There are {{ intersectionCount | async }} points with two or
                more lines passing
              </p>
            </div>
          }
        </div>
      </div>
    }
    <div class="flex-grow p-4">
      <h3 class="mb-4 font-bold">Current state visualized</h3>
      <p class="my-2">To understand what's going on, try the example input</p>
      <canvas
        #canvas
        class="h-full w-full rounded-lg border border-gray-800 bg-gray-300 p-2 dark:border-gray-300 dark:bg-gray-800"
      ></canvas>
    </div>
  </div>
</main>
