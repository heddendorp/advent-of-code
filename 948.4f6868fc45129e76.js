"use strict";(self.webpackChunkAdventOfCode=self.webpackChunkAdventOfCode||[]).push([[948],{9948:(U,v,h)=>{h.r(v),h.d(v,{Day11Module:()=>F});var x=h(6019),y=h(4881);const A=JSON.parse('{"i":"5483143223\\n2745854711\\n5264556173\\n6141336146\\n6357385478\\n4167524645\\n2176841721\\n6882881134\\n4846848554\\n5283751526","x":"3265255276\\n1537412665\\n7335746422\\n6426325658\\n3854434364\\n8717377486\\n4522286326\\n6337772845\\n8824387665\\n6351586484"}');var p=h(4499),w=h(3145),T=h(5406),b=h(7384),t=h(3556);const S=["canvas"];function _(o,d){if(1&o){const i=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"h3",12),t._uU(2,"Run flash simulation"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"All places are increased each tick and flash at 9"),t.qZA(),t.TgZ(5,"div",13),t.TgZ(6,"button",14),t.NdJ("click",function(){return t.CHM(i),t.oxw(2).startSimulation()}),t._uU(7," Start Simulation "),t.qZA(),t.qZA(),t.qZA()}}function C(o,d){if(1&o){const i=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div"),t.TgZ(2,"h3",12),t._uU(3,"Load positions"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"We set up our riddle"),t.qZA(),t.TgZ(6,"div",13),t.TgZ(7,"button",14),t.NdJ("click",function(){return t.CHM(i),t.oxw().loadExample()}),t._uU(8," Load example "),t.qZA(),t.TgZ(9,"button",14),t.NdJ("click",function(){return t.CHM(i),t.oxw().loadRiddle()}),t._uU(10," Load full input "),t.qZA(),t.qZA(),t.YNc(11,_,8,0,"div",4),t.qZA(),t.qZA()}if(2&o){const i=d.ngIf;t.xp6(11),t.Q6J("ngIf",i>=2)}}const D=[{path:"",component:(()=>{class o{constructor(){this.currentStep=new p.X(1),this.simProgress$=new p.X(0),this.simStep$=new p.X(0),this.flashes$=new p.X(0),this.fullFlash$=new p.X(0),this.ctx=null,this.grid=[]}ngOnInit(){this.canvas&&(this.ctx=this.canvas.nativeElement.getContext("2d"))}loadInput(i){this.simProgress$.next(0),this.simStep$.next(0),this.flashes$.next(0),this.fullFlash$.next(0),this.grid=[];const s=i.split("\n").map(f=>f.split("").map(Number));console.log(s);const a=this.ctx;a&&(a.clearRect(0,0,300,300),a.font="20px Arial",a.fillStyle="white",s.forEach((f,$)=>{f.forEach((l,g)=>{a.fillText(String(l),30*g,30*$)})})),this.currentStep.next(2),this.grid=s}loadExample(){this.loadInput(A.i)}loadRiddle(){this.loadInput(A.x)}startSimulation(){const i=this.ctx;if(!i)return;const s=new Map;for(let a=0;a<10;a++)for(let u=0;u<10;u++)s.set(`${u},${a}`,this.grid[a][u]);(0,w.F)(300).pipe((0,T.o)(()=>0===this.fullFlash$.value),(0,b.b)(a=>{this.simStep$.next(a+1)})).subscribe(a=>{const u=this.simProgress$.getValue();u<100&&this.simProgress$.next(u+1),i.clearRect(0,0,300,300),i.font="20px Arial";const $=[],l=new Set;s.forEach((m,r)=>{9===m&&($.push(r),a<100&&this.flashes$.next(this.flashes$.value+1),l.add(r)),s.set(r,(m+1)%10)}),this.drawGrid(s);const g=m=>{const r=[];m.forEach(Z=>{const[e,n]=Z.split(",").map(Number);if(e>0){const c=(s.get(`${e-1},${n}`)+1)%10;0===c&&!l.has(`${e-1},${n}`)&&(r.push(`${e-1},${n}`),l.add(`${e-1},${n}`)),s.set(`${e-1},${n}`,c)}if(e<9){const c=(s.get(`${e+1},${n}`)+1)%10;0===c&&!l.has(`${e+1},${n}`)&&(r.push(`${e+1},${n}`),l.add(`${e+1},${n}`)),s.set(`${e+1},${n}`,c)}if(n>0){const c=(s.get(`${e},${n-1}`)+1)%10;0===c&&!l.has(`${e},${n-1}`)&&(r.push(`${e},${n-1}`),l.add(`${e},${n-1}`)),s.set(`${e},${n-1}`,c)}if(n<9){const c=(s.get(`${e},${n+1}`)+1)%10;0===c&&!l.has(`${e},${n+1}`)&&(r.push(`${e},${n+1}`),l.add(`${e},${n+1}`)),s.set(`${e},${n+1}`,c)}if(e>0&&n>0){const c=(s.get(`${e-1},${n-1}`)+1)%10;0===c&&!l.has(`${e-1},${n-1}`)&&(r.push(`${e-1},${n-1}`),l.add(`${e-1},${n-1}`)),s.set(`${e-1},${n-1}`,c)}if(e>0&&n<9){const c=(s.get(`${e-1},${n+1}`)+1)%10;0===c&&!l.has(`${e-1},${n+1}`)&&(r.push(`${e-1},${n+1}`),l.add(`${e-1},${n+1}`)),s.set(`${e-1},${n+1}`,c)}if(e<9&&n>0){const c=(s.get(`${e+1},${n-1}`)+1)%10;0===c&&!l.has(`${e+1},${n-1}`)&&(r.push(`${e+1},${n-1}`),l.add(`${e+1},${n-1}`)),s.set(`${e+1},${n-1}`,c)}if(e<9&&n<9){const c=(s.get(`${e+1},${n+1}`)+1)%10;0===c&&!l.has(`${e+1},${n+1}`)&&(r.push(`${e+1},${n+1}`),l.add(`${e+1},${n+1}`)),s.set(`${e+1},${n+1}`,c)}}),this.drawGrid(s),r.length>0?(a<100&&this.flashes$.next(this.flashes$.value+r.length),requestAnimationFrame(()=>{g(r)})):(100===l.size&&0===this.fullFlash$.value&&this.fullFlash$.next(a+1),l.forEach(Z=>{s.set(Z,0)}))};requestAnimationFrame(()=>{g($)})})}drawGrid(i){const s=this.ctx;s&&(s.clearRect(0,0,300,300),s.font="20px Arial",i.forEach((u,f)=>{const[$,l]=f.split(",").map(Number);s.fillStyle=0===u?"white":"gray",s.fillText(String(u),30*$,30*l)}))}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-day11"]],viewQuery:function(i,s){if(1&i&&t.Gf(S,7),2&i){let a;t.iGM(a=t.CRH())&&(s.canvas=a.first)}},decls:27,vars:16,consts:[[1,"p-4","dark:text-white","min-h-full"],[1,"text-2xl","font-mono","font-black","mb-4"],[1,"max-w-xl"],[1,"flex","lg:row","lg:max-w-6xl","lg:h-full"],[4,"ngIf"],[1,"p-4"],[1,"font-bold","mb-4"],["width","300px","height","300px",1,"rounded-lg","bg-gray-300","dark:bg-gray-800","dark:border-gray-300","p-2","border","border-gray-800"],["canvas",""],[1,"relative","pt-1"],[1,"overflow-hidden","h-2","text-xs","flex","rounded","bg-purple-200","w-full"],[1,"transition-all","shadow-none","flex","flex-col","text-center","whitespace-nowrap","text-white","justify-center","bg-purple-500"],[1,"font-bold","mt-6","mb-2"],[1,"flex","lg:row","space-x-4"],["type","button",1,"button",3,"click"]],template:function(i,s){1&i&&(t.TgZ(0,"main",0),t.TgZ(1,"h1",1),t._uU(2," --- Day 11: Dumbo Octopus --- "),t.qZA(),t.TgZ(3,"p",2),t._uU(4," Our task today is to simulate a field of flashing fish. "),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,C,12,1,"div",4),t.ALo(7,"async"),t.TgZ(8,"div",5),t.TgZ(9,"h3",6),t._uU(10,"Visualisation of our steps"),t.qZA(),t.TgZ(11,"div"),t._UZ(12,"canvas",7,8),t.TgZ(14,"div",9),t.TgZ(15,"div",10),t._UZ(16,"div",11),t.ALo(17,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"p"),t._uU(19),t.ALo(20,"async"),t.qZA(),t.TgZ(21,"p"),t._uU(22),t.ALo(23,"async"),t.qZA(),t.TgZ(24,"p"),t._uU(25),t.ALo(26,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(6),t.Q6J("ngIf",t.lcZ(7,6,s.currentStep)),t.xp6(10),t.Udp("width",t.lcZ(17,8,s.simProgress$)+"%"),t.xp6(3),t.hij("Simulating step ",t.lcZ(20,10,s.simStep$),""),t.xp6(3),t.hij("Registered ",t.lcZ(23,12,s.flashes$)," flashes before step 100"),t.xp6(3),t.hij("Full flash at ",t.lcZ(26,14,s.fullFlash$),""))},directives:[x.O5],pipes:[x.Ov],styles:[""],changeDetection:0}),o})()}];let q=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[y.Bz.forChild(D)],y.Bz]}),o})(),F=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[x.ez,q]]}),o})()}}]);